{"version":3,"sources":["login/ButtonBar.js","login/Alert.js","login/Input.js","login/LoginForm.js","login/RegisterForm.js","storageKeys.js","login/util/submitFunc.js","login/Form.js","login/Login.js","game/util/logout.js","game/util/axiosAuthWrapper.js","game/util/parseJwt.js","game/NavBar.js","game/home/GameItem.js","game/home/GamesList.js","game/home/SearchGame.js","game/home/GamesHandler.js","game/play/ChessboardComp.js","game/play/PlayGame.js","game/play/GameRoom.js","game/Game.js","App.js","index.js"],"names":["ButtonBarLogin","changeForm","className","type","width","height","viewBox","fill","xmlns","fillRule","d","clipRule","onClick","ButtonBarRegistration","ButtonBar","form","Alert","response","status","role","message","Input","id","name","label","placeholder","innerRef","htmlFor","ref","required","LoginForm","RegisterForm","passRef","validPassRef","useState","valid","setValid","userRef","useRef","onChange","axios","get","current","value","then","res","catch","err","TOKEN_KEY","request","url","data","setResponse","setAuth","post","localStorage","setItem","token","Form","setForm","context","useContext","AuthContext","onSubmit","event","preventDefault","username","target","password","loginSubmit","email","validateForm","Login","logout","authContext","removeItem","axiosAuthWrapper","config","headers","Authorization","getItem","undefined","parseJwt","base64","split","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","NavBar","refresh","setRefresh","userInfo","setUserInfo","useEffect","mounted","decodedToken","axiosAW","method","console","log","elo","to","GameItem","game","GamesList","games","setGames","key","game_uuid","SearchGame","result","setResult","searchState","setSearchState","GamesHandler","stringa","ChessboardComp","props","allowDrag","sourceSquare","pieceSquare","myTurn","removeHighlightSquare","setState","history","squareStyles","squareStyling","highlightSquare","squaresToHighlight","highlightStyles","reduce","a","background","borderRadius","state","onDrop","targetSquare","move","from","promotion","fen","verbose","checkmate","check","draw","in_checkmate","in_check","in_draw","setGameState","moveEvent","onMouseOverSquare","square","moves","length","i","push","onMouseOutSquare","onSquareClick","onSquareRightClick","backgroundColor","load","chessboard","turn","dropSquareStyle","this","Chess","setFenFunction","children","position","onListen","Component","PlayGame","color","socket","white","black","setChessboard","setMove","setMyTurn","gameState","fenFunction","on","new_move","new_chessboard","isCheckmate","isCheck","isDraw","emit","whosend","callback","calcWidth","screenWidth","orientation","boardStyle","boxShadow","GameRoom","useParams","forbidden","setForbidden","setWhite","setBlack","io","disconnect","axioAW","Game","path","createContext","App","auth","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.858b6ed0.chunk.js","sourcesContent":["import React from 'react';\n\nfunction ButtonBarLogin({ changeForm }) {\n    return (\n        <>\n            <div className=\"col\">\n                <button className=\"btn btn-primary btn-block btn-lg mt-1\" type=\"submit\">\n                    Login\n                    <svg className=\"bi bi-box-arrow-in-right ml-2\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path fillRule=\"evenodd\" d=\"M8.146 11.354a.5.5 0 010-.708L10.793 8 8.146 5.354a.5.5 0 11.708-.708l3 3a.5.5 0 010 .708l-3 3a.5.5 0 01-.708 0z\" clipRule=\"evenodd\"/>\n                        <path fillRule=\"evenodd\" d=\"M1 8a.5.5 0 01.5-.5h9a.5.5 0 010 1h-9A.5.5 0 011 8z\" clipRule=\"evenodd\"/>\n                        <path fillRule=\"evenodd\" d=\"M13.5 14.5A1.5 1.5 0 0015 13V3a1.5 1.5 0 00-1.5-1.5h-8A1.5 1.5 0 004 3v1.5a.5.5 0 001 0V3a.5.5 0 01.5-.5h8a.5.5 0 01.5.5v10a.5.5 0 01-.5.5h-8A.5.5 0 015 13v-1.5a.5.5 0 00-1 0V13a1.5 1.5 0 001.5 1.5h8z\" clipRule=\"evenodd\"/>\n                    </svg>\n                </button>\n            </div> \n            <div className=\"col\">\n                <button className=\"btn btn-secondary btn-block btn-lg mt-1\" \n                        type=\"button\" \n                        onClick={changeForm}>Register</button>\n            </div>\n        </>\n    );\n}\n\nfunction ButtonBarRegistration({ changeForm }) {\n    return (\n        <>\n            <div className=\"col\">\n                <button className=\"btn btn-secondary btn-block btn-lg mt-1\" \n                        type=\"button\"\n                        onClick={changeForm}>Login</button>\n            </div>\n            <div className=\"col\">\n                <button className=\"btn btn-primary btn-block btn-lg mt-1\" type=\"submit\" >\n                    Register&nbsp;\n                    <svg className=\"bi bi-archive ml-2\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path fillRule=\"evenodd\" d=\"M2 5v7.5c0 .864.642 1.5 1.357 1.5h9.286c.715 0 1.357-.636 1.357-1.5V5h1v7.5c0 1.345-1.021 2.5-2.357 2.5H3.357C2.021 15 1 13.845 1 12.5V5h1z\" clipRule=\"evenodd\"/>\n                        <path fillRule=\"evenodd\" d=\"M5.5 7.5A.5.5 0 016 7h4a.5.5 0 010 1H6a.5.5 0 01-.5-.5zM15 2H1v2h14V2zM1 1a1 1 0 00-1 1v2a1 1 0 001 1h14a1 1 0 001-1V2a1 1 0 00-1-1H1z\" clipRule=\"evenodd\"/>\n                    </svg>\n                </button>\n            </div>\n        </>\n    );\n}\n\n\nexport default function ButtonBar({ changeForm, form }) {\n\n    return (\n        <div className=\"row mt-5\">\n            { form === 'login' \n                ? <ButtonBarLogin changeForm={changeForm}/>\n                : <ButtonBarRegistration changeForm={changeForm}/> \n            }\n        </div>\n    );\n}","import React from 'react';\n\n\nexport default function Alert({ response }) {\n\n    return (\n        <>\n        { response.status !== null && \n            <div className={\"alert alert-\" +  (response.status > 201 ? 'danger' : 'success')} role=\"alert\">\n                {response.message}\n            </div> }\n        </>\n    );\n}","import React from 'react';\n\nexport default function Input({\n    id,\n    type,\n    name=null, \n    label=null, \n    placeholder=null, \n    innerRef=null}) {\n\n        return (\n            <div className=\"form-group\">\n                <label htmlFor={id}>{label}</label>\n                <input id={id} name={name} className=\"form-control\" ref={innerRef} type={type} placeholder={placeholder} required/>\n            </div>\n        );\n}","import React from 'react';\nimport Input from './Input';\n\n\nexport default function LoginForm() {\n\n    return (\n        <>\n            <Input id=\"log-user\" type=\"text\" name=\"username\" label=\"Username\" placeholder=\"Enter Username\"/>\n            <Input id=\"log-pass\" type=\"password\" name=\"password\" label=\"Password\" placeholder=\"Enter Password\"/>\n        </>\n    );\n}","import React, { useRef, useState } from 'react';\nimport axios from 'axios';\n\nimport Input from './Input';\n\n\nexport default function RegisterForm({ passRef, validPassRef }) {\n\n    const [valid, setValid] = useState();\n    const userRef = useRef();\n\n    function checkUsername() {\n        axios.get(\"/auth/users/\"+userRef.current.value)\n        .then((res) => setValid('border border-danger')) \n        .catch((err) => setValid('border border-success'));\n    }\n\n\n    return (\n        <>\n            <Input id=\"reg-email\" type=\"email\" name=\"email\" label=\"Email\" placeholder=\"Enter Username\"/>\n            <div className=\"form-group\">\n                <label htmlFor=\"reg-user\">Username</label>\n                <input  ref={userRef}\n                        id=\"reg-user\" \n                        name=\"username\" \n                        className={\"form-control \" + valid } \n                        type=\"text\" \n                        placeholder=\"Enter Username\" \n                        onChange={checkUsername}\n                        required/>\n            </div>\n            <Input id=\"reg-pass-1\" innerRef={passRef} name=\"password\" type=\"password\" label=\"Password\" placeholder=\"Enter Password\"/>\n            <Input  id=\"reg-pass-2\"\n                    innerRef={validPassRef}\n                    type=\"password\" \n                    label=\"Repeat Password\" \n                    placeholder=\"Enter Password Again\"\n                />\n            \n            \n        </>\n    );\n}","export const TOKEN_KEY = 'auth_token_key';","import axios from 'axios';\nimport {TOKEN_KEY} from '../../storageKeys';\n\n\nfunction request(url, data, setResponse, setAuth) {\n    axios.post(url, data)\n    .then((res) => {\n        setResponse({\n            status: res.status,\n            message: res.data.message\n        });\n        localStorage.setItem(TOKEN_KEY, res.data.token);\n        setAuth(true);\n    })\n    .catch((err) => {\n        setResponse({\n            status: err.response.status,\n            message: err.response.data.message\n        });\n    });\n}\n\n\nexport function loginSubmit(event, setResponse, setAuth) {\n    event.preventDefault();\n\n    request('/auth/login', {\n        username: event.target.username.value,\n        password: event.target.password.value\n        }, setResponse, setAuth);\n}\n\n\nexport function validateForm(event, setResponse, setAuth, passRef, validPassRef) {\n    event.preventDefault();\n\n    if (passRef.current.value !== validPassRef.current.value) {\n        setResponse({\n            status: '412',\n            message: 'Passwords must be equal'\n        });\n        return;\n    }\n    \n    request('/auth/register', {\n        username: event.target.username.value,\n        password: event.target.password.value,\n        email: event.target.email.value\n    }, setResponse, setAuth);\n}","import React, { useState, useRef, useContext } from 'react';\n\nimport ButtonBar from './ButtonBar';\nimport Alert from './Alert';\nimport LoginForm from './LoginForm';\nimport RegisterForm from './RegisterForm';\n\nimport { validateForm, loginSubmit } from './util/submitFunc';\nimport {AuthContext} from '../App'; \n\n\nexport default function Form() {\n\n    const passRef = useRef();\n    const validPassRef = useRef();\n\n    const [form, setForm] = useState('login');\n    const [response, setResponse] = useState({ status: null, message: null });\n\n    const context = useContext(AuthContext);\n\n    function login(event) {\n        loginSubmit(event, setResponse, context.setAuth);\n    }\n\n    function register(event) {\n        validateForm(event, setResponse, context.setAuth, passRef, validPassRef);\n    }\n\n    function changeForm() {\n        if (form === 'login') {\n            setForm('registration');\n        } else {\n            setForm('login');\n        }\n\n    }\n\n    return (\n        <div className=\"row justify-content-center\">\n            <div className=\"card  col col-md-8 col-lg-5 bg-light mx-3\" >\n                <div className=\"card-body\" >\n                    <h4 className=\"card-title\">{form === 'login' ? 'Sign In' : 'Sign Up'}</h4>\n                    <form onSubmit={form === 'login' ? login : register}>\n                        { form === 'login' ? <LoginForm /> : <RegisterForm passRef={passRef} validPassRef={validPassRef} /> }\n                        <Alert response={response} />\n                        <ButtonBar  changeForm={changeForm} form={ form }/>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n}","import React from 'react';\nimport Form from './Form';\n\nexport default function Login() {\n\n    return (\n        <div className=\"container\">\n            <div className=\"text-white text-center m-5\">\n                <h1>chess.unimore &#9819;</h1>\n            </div>\n            <Form />\n        </div>\n    );\n}","export default function logout(authContext, TOKEN_KEY) {\n    localStorage.removeItem(TOKEN_KEY);\n    authContext.setAuth(false);\n}","import axios from 'axios';\nimport {TOKEN_KEY} from '../../storageKeys';\nimport logout from './logout';\n\nexport function axiosAuthWrapper(config, authContext) {\n    config.headers = config.headers || {};\n    config.headers.Authorization = 'Bearer ' + localStorage.getItem(TOKEN_KEY);\n\n    return axios(config).catch((err) => {\n        if (err.response !== undefined && err.response.status === 401) \n            logout(authContext, TOKEN_KEY);\n        throw err;\n    });\n}","\nexport default function parseJwt (token) {\n    var base64Url = token.split('.')[1];\n    var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n    var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n    }).join(''));\n\n    return JSON.parse(jsonPayload);\n};","import React, { useContext, useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport {AuthContext} from '../App';\nimport {TOKEN_KEY} from '../storageKeys';\nimport {axiosAuthWrapper as axiosAW} from './util/axiosAuthWrapper';\nimport parseJwt from './util/parseJwt';\nimport logout from './util/logout';\n\n\nexport default function NavBar({ refresh, setRefresh }) {\n\n    const authContext = useContext(AuthContext);\n    \n    const token = useState(localStorage.getItem(TOKEN_KEY))[0];\n    const [userInfo, setUserInfo] = useState({});\n\n\n    useEffect(() => {\n        let mounted = true;\n\n        try {\n            var decodedToken = parseJwt(token);\n        } catch (err) {\n            logout(authContext, TOKEN_KEY);\n            return;\n        }\n        axiosAW({\n            method: 'get',\n            url: '/game/user/' + decodedToken.username,\n        }, authContext)\n        .then((res) => {\n            if (!mounted) return;\n            setUserInfo(res.data);\n            setRefresh(false);\n        })\n        .catch((err) => console.log(err));\n\n        return () => mounted = false;\n    }, [token, authContext, setRefresh, refresh]);\n\n\n    return (\n        <div className=\"container d-flex flex-wrap mt-3\">\n                <h2 className=\"mr-2\"><span className=\"badge badge-warning text-wrap\">{userInfo.username}</span></h2>\n                <h2><span className=\"badge badge-info text-wrap\">{userInfo.elo}</span></h2>\n                <div className=\"ml-auto\">\n                    <Link to=\"/\">\n                        <button className=\"btn btn-danger btn-lg\" onClick={() => logout(authContext, TOKEN_KEY)}>\n                            Logout\n                            <svg className=\"bi bi-box-arrow-right ml-2\" width=\"1.5em\" height=\"1.5em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path fillRule=\"evenodd\" d=\"M11.646 11.354a.5.5 0 010-.708L14.293 8l-2.647-2.646a.5.5 0 01.708-.708l3 3a.5.5 0 010 .708l-3 3a.5.5 0 01-.708 0z\" clipRule=\"evenodd\"/>\n                                <path fillRule=\"evenodd\" d=\"M4.5 8a.5.5 0 01.5-.5h9a.5.5 0 010 1H5a.5.5 0 01-.5-.5z\" clipRule=\"evenodd\"/>\n                                <path fillRule=\"evenodd\" d=\"M2 13.5A1.5 1.5 0 01.5 12V4A1.5 1.5 0 012 2.5h7A1.5 1.5 0 0110.5 4v1.5a.5.5 0 01-1 0V4a.5.5 0 00-.5-.5H2a.5.5 0 00-.5.5v8a.5.5 0 00.5.5h7a.5.5 0 00.5-.5v-1.5a.5.5 0 011 0V12A1.5 1.5 0 019 13.5H2z\" clipRule=\"evenodd\"/>\n                            </svg>\n                        </button>\n                    </Link>\n                </div>\n        </div>\n    );\n}","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport {AuthContext} from '../../App';\nimport {axiosAuthWrapper as axiosAW} from '../util/axiosAuthWrapper';\nimport { useContext } from 'react';\n\n\nexport default function GameItem( { game, name, setRefresh }) {\n\n    // I could choose an api to generate random name for games instead of displaying uuid\n    const authContext = useContext(AuthContext);\n\n    function surrend() {\n        axiosAW({\n            method: 'delete',\n            url: '/game/surrend/' + game\n        }, authContext)\n        .catch(() => console.log('Failed to surrend'));\n\n        setRefresh(true);\n    }\n\n    return (\n        <div className=\"d-flex flex-wrap alert alert-warning mx-3 align-items-center\" role=\"alert\">\n            <svg className=\"bi bi-controller mx-3\" width=\"2em\" height=\"2em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path fillRule=\"evenodd\" d=\"M11.119 2.693c.904.19 1.75.495 2.235.98.407.408.779 1.05 1.094 1.772.32.733.599 1.591.805 2.466.206.875.34 1.78.364 2.606.024.815-.059 1.602-.328 2.21a1.42 1.42 0 01-1.445.83c-.636-.067-1.115-.394-1.513-.773a11.307 11.307 0 01-.739-.809c-.126-.147-.25-.291-.368-.422-.728-.804-1.597-1.527-3.224-1.527-1.627 0-2.496.723-3.224 1.527-.119.131-.242.275-.368.422-.243.283-.494.576-.739.81-.398.378-.877.705-1.513.772a1.42 1.42 0 01-1.445-.83c-.27-.608-.352-1.395-.329-2.21.024-.826.16-1.73.365-2.606.206-.875.486-1.733.805-2.466.315-.722.687-1.364 1.094-1.772.486-.485 1.331-.79 2.235-.98.932-.196 2.03-.292 3.119-.292 1.089 0 2.187.096 3.119.292zm-6.032.979c-.877.185-1.469.443-1.733.708-.276.276-.587.783-.885 1.465a13.748 13.748 0 00-.748 2.295 12.351 12.351 0 00-.339 2.406c-.022.755.062 1.368.243 1.776a.42.42 0 00.426.24c.327-.034.61-.199.929-.502.212-.202.4-.423.615-.674.133-.156.276-.323.44-.505C4.861 9.97 5.978 9.026 8 9.026s3.139.943 3.965 1.855c.164.182.307.35.44.505.214.25.403.472.615.674.318.303.601.468.929.503a.42.42 0 00.426-.241c.18-.408.265-1.02.243-1.776a12.354 12.354 0 00-.339-2.406 13.753 13.753 0 00-.748-2.295c-.298-.682-.61-1.19-.885-1.465-.264-.265-.856-.523-1.733-.708-.85-.179-1.877-.27-2.913-.27-1.036 0-2.063.091-2.913.27z\" clipRule=\"evenodd\"/>\n                <path d=\"M11.5 6.026a.5.5 0 11-1 0 .5.5 0 011 0zm-1 1a.5.5 0 11-1 0 .5.5 0 011 0zm2 0a.5.5 0 11-1 0 .5.5 0 011 0zm-1 1a.5.5 0 11-1 0 .5.5 0 011 0zm-7-2.5h1v3h-1v-3z\"/>\n                <path d=\"M3.5 6.526h3v1h-3v-1zM3.051 3.26a.5.5 0 01.354-.613l1.932-.518a.5.5 0 01.258.966l-1.932.518a.5.5 0 01-.612-.354zm9.976 0a.5.5 0 00-.353-.613l-1.932-.518a.5.5 0 10-.259.966l1.932.518a.5.5 0 00.612-.354z\"/>\n            </svg>\n            <span className=\"ml-3\">Game : {name}</span>\n            <Link className=\"ml-auto\" to={'/room/'+game}>\n                <button className=\"btn btn-success btn-md\" type=\"button\">\n                    <svg className=\"bi bi-caret-right-fill\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M12.14 8.753l-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 011.659-.753l5.48 4.796a1 1 0 010 1.506z\"/>\n                    </svg>\n                </button>\n            </Link>\n            <button className=\"btn btn-danger btn-md ml-3\" type=\"button\" onClick={() => surrend()}>\n                <svg className=\"bi bi-flag-fill\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path fillRule=\"evenodd\" d=\"M3.5 1a.5.5 0 01.5.5v13a.5.5 0 01-1 0v-13a.5.5 0 01.5-.5z\" clipRule=\"evenodd\"/>\n                    <path fillRule=\"evenodd\" d=\"M3.762 2.558C4.735 1.909 5.348 1.5 6.5 1.5c.653 0 1.139.325 1.495.562l.032.022c.391.26.646.416.973.416.168 0 .356-.042.587-.126a8.89 8.89 0 00.593-.25c.058-.027.117-.053.18-.08.57-.255 1.278-.544 2.14-.544a.5.5 0 01.5.5v6a.5.5 0 01-.5.5c-.638 0-1.18.21-1.734.457l-.159.07c-.22.1-.453.205-.678.287A2.719 2.719 0 019 9.5c-.653 0-1.139-.325-1.495-.562l-.032-.022c-.391-.26-.646-.416-.973-.416-.833 0-1.218.246-2.223.916A.5.5 0 013.5 9V3a.5.5 0 01.223-.416l.04-.026z\" clipRule=\"evenodd\"/>\n                </svg>\n            </button>\n        </div>\n    );\n}","import React, { useContext, useEffect } from 'react';\n\nimport GameItem from './GameItem';\n\nimport {AuthContext} from '../../App';\nimport {axiosAuthWrapper as axiosAW} from '../util/axiosAuthWrapper';\n\n\nexport default function GamesList({games, setGames, refresh, setRefresh}) {\n\n    const authContext = useContext(AuthContext);\n\n\n    useEffect(() => {\n        let mounted = true;\n        \n        axiosAW({\n            method: 'get',\n            url: '/game/games',\n        }, authContext)\n        .then((res) => {\n            if(!mounted) return;\n            setGames(res.data.games);\n            setRefresh(false);\n        })\n        .catch((err) => console.log(err.response));\n\n        return () => mounted = false;\n    }, [authContext, setGames, setRefresh, refresh]);\n\n    \n    return (\n        <div className=\"container\">\n            <div className=\"d-flex flex-wrap m-3\">\n                <h3>Games List</h3>\n                <button className=\"btn btn-info ml-auto\" type=\"button\" onClick={() => setRefresh(true)}>\n                    <svg className=\"bi bi-arrow-clockwise\" width=\"1.5em\" height=\"1.5em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path fillRule=\"evenodd\" d=\"M3.17 6.706a5 5 0 017.103-3.16.5.5 0 10.454-.892A6 6 0 1013.455 5.5a.5.5 0 00-.91.417 5 5 0 11-9.375.789z\" clipRule=\"evenodd\"/>\n                        <path fillRule=\"evenodd\" d=\"M8.147.146a.5.5 0 01.707 0l2.5 2.5a.5.5 0 010 .708l-2.5 2.5a.5.5 0 11-.707-.708L10.293 3 8.147.854a.5.5 0 010-.708z\" clipRule=\"evenodd\"/>\n                    </svg>\n                </button>\n            </div>\n            {games.map((game) => <GameItem  key={game.game_uuid} \n                                            game={game.game_uuid} \n                                            name={game.name} \n                                            setRefresh={setRefresh}/>)}\n        </div>\n    );\n}","import React, { useContext, useState, useEffect } from 'react';\n\nimport {AuthContext} from '../../App';\nimport {axiosAuthWrapper as axiosAW} from '../util/axiosAuthWrapper';\n\n\nexport default function SearchGame({ games, setGames }) {\n\n\n    const authContext = useContext(AuthContext);\n    const [result, setResult] = useState({});\n\n    const [searchState, setSearchState] = useState('idle');\n    \n    // for searching state\n    useEffect(() => {\n        let mounted = true;\n        if (searchState === 'idle') return () => mounted = false;\n        if (searchState === 'stop') return () => mounted = false;\n\n        axiosAW({\n            method: 'get',\n            url: '/game/matchmaking/start',\n        }, authContext)\n        .then((res) => {\n            if (!mounted) return;\n            setSearchState('idle');\n            setResult({status: 'success', message: 'Game found : '+res.data.name});\n            setGames([...games, { game_uuid:res.data.game_uuid, name: res.data.name} ]);\n        })\n        .catch((err) => {\n            if (!mounted) return;\n            setSearchState('idle');\n            setResult({status: 'failed', message: 'Failed to search game'});\n        });\n\n        return () => mounted = false;\n    }, [searchState, authContext, games, setGames]);\n\n\n    // for stopping state\n    useEffect(() => {\n        let mounted = true;\n        if (searchState === 'idle') return () => mounted = false;\n        if (searchState === 'start') return () => mounted = false;\n\n        axiosAW({\n            method: 'get',\n            url: '/game/matchmaking/stop',\n        }, authContext)\n        .then((res) => {\n            if (!mounted) return;\n            setSearchState('idle');\n            setResult({status: 'success', message: 'Matchmaking stopped with success'});\n        })\n        .catch((err) => {\n            if (!mounted) return;\n            setSearchState('idle'); // this will seem strange for the user but it's the only state\n            setResult({status: 'failed', message: 'We couldn\\'t stop matchmaking, you should search and stop again'});\n        })\n\n        return () => mounted = false;\n    }, [searchState, authContext]);\n\n\n    return (\n        <div className=\"container\">\n            <div className=\"d-flex flex-wrap m-3 align-items-center\">\n                <div className=\"mr-auto\">\n                    { searchState === 'start' &&\n                    <button className=\"btn btn-lg btn-danger\" type=\"button\" onClick={() => setSearchState('stop')}>\n                        Stop Search\n                        <svg className=\"bi bi-exclamation-octagon-fill ml-3\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <path fillRule=\"evenodd\" d=\"M11.46.146A.5.5 0 0011.107 0H4.893a.5.5 0 00-.353.146L.146 4.54A.5.5 0 000 4.893v6.214a.5.5 0 00.146.353l4.394 4.394a.5.5 0 00.353.146h6.214a.5.5 0 00.353-.146l4.394-4.394a.5.5 0 00.146-.353V4.893a.5.5 0 00-.146-.353L11.46.146zM8 4a.905.905 0 00-.9.995l.35 3.507a.552.552 0 001.1 0l.35-3.507A.905.905 0 008 4zm.002 6a1 1 0 100 2 1 1 0 000-2z\" clipRule=\"evenodd\"/>\n                        </svg>\n                    </button> }\n                    { searchState === 'idle' &&\n                    <button className=\"btn btn-lg btn-success\" type=\"button\" onClick={() => setSearchState('start')}>\n                        Search a New Game\n                        <svg className=\"bi bi-search ml-3\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <path fillRule=\"evenodd\" d=\"M10.442 10.442a1 1 0 011.415 0l3.85 3.85a1 1 0 01-1.414 1.415l-3.85-3.85a1 1 0 010-1.415z\" clipRule=\"evenodd\"/>\n                            <path fillRule=\"evenodd\" d=\"M6.5 12a5.5 5.5 0 100-11 5.5 5.5 0 000 11zM13 6.5a6.5 6.5 0 11-13 0 6.5 6.5 0 0113 0z\" clipRule=\"evenodd\"/>\n                        </svg>\n                    </button> }\n                    { searchState === 'stop' &&\n                    <button className=\"btn btn-lg btn-warning\" type=\"button\">\n                        Stopping\n                        <svg className=\"bi bi-clock\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <path fillRule=\"evenodd\" d=\"M8 15A7 7 0 108 1a7 7 0 000 14zm8-7A8 8 0 110 8a8 8 0 0116 0z\" clipRule=\"evenodd\"/>\n                            <path fillRule=\"evenodd\" d=\"M7.5 3a.5.5 0 01.5.5v5.21l3.248 1.856a.5.5 0 01-.496.868l-3.5-2A.5.5 0 017 9V3.5a.5.5 0 01.5-.5z\" clipRule=\"evenodd\"/>\n                        </svg>\n                    </button> }\n                </div>\n                { result.status === 'success' && <div className=\"alert alert-success m-0\" role=\"alert\">{result.message}</div> }\n                { result.status === 'failed' && <div className=\"alert alert-danger m-0\" role=\"alert\">{result.message}</div> }\n            </div>\n        </div>\n    );\n}","import React, { useState } from 'react';\n\nimport GamesList from './GamesList';\nimport SearchGame from './SearchGame';\n\n\nexport default function GamesHandler({ refresh, setRefresh }) {\n\n    const [games, setGames] = useState([]);\n\n\n    return (\n        <div className=\"container\">\n            <div className=\"card mt-3\">\n                <SearchGame games={games} setGames={setGames}/>\n                <GamesList games={games} setGames={setGames} refresh={refresh} setRefresh={setRefresh} />\n            </div>\n        </div>\n    );\n}","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Chess from \"chess.js\";\n\n//import WithMoveValidation from './WithMoveValidation'\n\nlet stringa;\n\nexport default class ChessboardComp extends Component {\n\n    constructor(props){\n        super(props);\n        this.state = {\n        fen: this.props.chessboard,\n        // square styles for active drop squares\n        dropSquareStyle: {},\n        // custom square styles\n        squareStyles: {},\n        // square with the currently clicked piece\n        pieceSquare: '',\n        // currently clicked square\n        square: '',\n        history: []\n        }\n        stringa=this.props.chessboard;\n       /* if(this.props.chessboard == null){\n            console.log('waiting timeout')\n            setTimeout(this.waitAlert,4000);\n        }*/\n    }\n\n    static propTypes = { children: PropTypes.func };\n\n    /*state = {\n        fen: this.props.chessboard,\n        // square styles for active drop squares\n        dropSquareStyle: {},\n        // custom square styles\n        squareStyles: {},\n        // square with the currently clicked piece\n        pieceSquare: '',\n        // currently clicked square\n        square: '',\n        history: []\n    };*/\n\n    componentDidMount() {\n       /* if(this.props.chessboard == null){\n            console.log('waiting timeout')\n            setTimeout(this.waitAlert,4000);\n        }*/\n        stringa=this.props.chessboard;\n        this.game = new Chess(this.props.chessboard);\n        console.log('lo stato della chessboard è *******************************');\n        console.log(stringa);\n        //this.game.load(stringa)\n        //fenFunction= () => console.log('it worked');\n        //this.game.load(this.props.chessboard);\n        //fenFunction=this.game.load;\n        this.props.setFenFunction(this.game.load);\n        console.log(\"component mounted!\")\n        //console.log(fenFunction);\n      /*  this.setState(({ history, pieceSquare }) => ({\n            fen: this.game.fen(),\n            history: this.game.history({ verbose: true }),\n            squareStyles: squareStyling({ pieceSquare, history })\n        }));*/\n    }\n\n    componentDidUpdate() {\n        if(this.game.fen() !== this.props.chessboard){\n            if(this.props.chessboard != null && this.game.fen() === 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1'){\n                this.game.load(this.props.chessboard);\n            }\n        }\n    }\n    \n    allowDrag = ({sourceSquare, pieceSquare}) => {\n        // do not pick up pieces if the game is over\n        // or if it's not that side's turn\n        //console.log(\"sono entrato\");\n        console.log(this.props.myTurn);\n       /* if((this.game.turn() === 'w' && pieceSquare.search(/^b/) !== -1) ||\n           (this.game.turn() === 'b' && pieceSquare.search(/^w/) !== -1))\n           return false;*/\n        if (this.props.myTurn === false) {\n            return false;\n        }\n        else return true;\n    };\n    // keep clicked square style and remove hint squares\n    removeHighlightSquare = () => {\n        this.setState(({ pieceSquare, history }) => ({\n            squareStyles: squareStyling({ pieceSquare, history })\n        }));\n    };\n\n    // show possible moves\n    highlightSquare = (sourceSquare, squaresToHighlight) => {\n        const highlightStyles = [sourceSquare, ...squaresToHighlight].reduce(\n            (a, c) => {\n                return {\n                    ...a,\n                    ...{\n                        [c]: {\n                            background:\n                                'radial-gradient(circle, #fffc00 36%, transparent 40%)',\n                            borderRadius: '50%'\n                        }\n                    },\n                    ...squareStyling({\n                        history: this.state.history,\n                        pieceSquare: this.state.pieceSquare\n                    })\n                };\n            },\n            {}\n        );\n\n        this.setState(({ squareStyles }) => ({\n            squareStyles: { ...squareStyles, ...highlightStyles }\n        }));\n    };\n\n    onDrop = ({ sourceSquare, targetSquare }) => {\n        // see if the move is legal\n       /* console.log('turn as i am dropping');\n        console.log(this.game.turn());*/\n        let move = this.game.move({\n            from: sourceSquare,\n            to: targetSquare,\n            promotion: 'q' // always promote to a queen for example simplicity\n        });\n       // console.log(move);\n\n        // illegal move\n        if (move === null) return;\n\n        this.setState(({ history, pieceSquare }) => ({\n            fen: this.game.fen(),\n            history: this.game.history({ verbose: true }),\n            squareStyles: squareStyling({ pieceSquare, history })\n        }));\n\n        let checkmate=false;\n        let check=false;\n        let draw=false;\n\n        console.log('controllo lo stato della scacchiera')\n        console.log(this.game.fen());\n\n        if(this.game.in_checkmate()===true){\n            checkmate=true;\n            console.log('checkmate!!!!!');\n        }\n\n        if(this.game.in_check()===true){\n            check=true;\n            //this.game.load('rnb1kbnr/pppp1ppp/8/4p3/5PPq/8/PPPPP2P/RNBQKBNR w KQkq - 1 3')\n            console.log('in checkkooooo!!!!!!!!!!!!!!!!!!!!!!!!!!!!');\n        }\n        \n        if(this.game.in_draw()===true){\n            draw=true;\n            console.log('draw game!!!!!');\n        }    \n        \n        if (checkmate)\n            this.props.setGameState('You Win');\n        if (draw)\n            this.props.setGameState('Draw');\n        this.props.moveEvent(move, this.game.fen(),checkmate, check, draw);\n    };\n\n    onMouseOverSquare = square => {\n        // get list of possible moves for this square\n        let moves = this.game.moves({\n            square: square,\n            verbose: true\n        });\n\n        // exit if there are no moves available for this square\n        if (moves.length === 0) return;\n\n        let squaresToHighlight = [];\n        for (var i = 0; i < moves.length; i++) {\n            squaresToHighlight.push(moves[i].to);\n        }\n\n        this.highlightSquare(square, squaresToHighlight);\n    };\n\n    onMouseOutSquare = square => this.removeHighlightSquare(square);\n\n    onSquareClick = square => {\n        this.setState(({ history }) => ({\n            squareStyles: squareStyling({ pieceSquare: square, history }),\n            pieceSquare: square\n        }));\n        let move = this.game.move({\n            from: this.state.pieceSquare,\n            to: square,\n            promotion: 'q' // always promote to a queen for example simplicity\n        });\n\n        // illegal move\n        if (move === null) return;\n\n        this.props.moveEvent(move, this.game.fen());\n\n        this.setState({\n            fen: this.game.fen(),\n            history: this.game.history({ verbose: true }),\n            pieceSquare: ''\n        });\n    };\n\n    \n    onSquareRightClick = square => {\n        this.setState({\n            squareStyles: { [square]: { backgroundColor: 'deepPink' } }\n        });\n        this.game.load(this.props.chessboard);\n        console.log('turn of the player ');\n        console.log(this.game.turn());\n        console.log('chessboard position :: ');\n        console.log(this.game.fen())\n    }\n    \n\n    render() {\n        const { fen, dropSquareStyle, squareStyles } = this.state;\n\n        return this.props.children({\n            squareStyles,\n            position: fen,\n            onListen : this.onListen,\n            allowDrag: this.allowDrag,\n            onMouseOverSquare: this.onMouseOverSquare,\n            onMouseOutSquare: this.onMouseOutSquare,\n            onDrop: this.onDrop,\n            dropSquareStyle,\n            //onDragOverSquare: this.onDragOverSquare,\n            onSquareClick: this.onSquareClick,\n            onSquareRightClick: this.onSquareRightClick\n        });\n    }\n}\n\nconst squareStyling = ({ pieceSquare, history }) => {\n    const sourceSquare = history.length && history[history.length - 1].from;\n    const targetSquare = history.length && history[history.length - 1].to;\n\n    return {\n        [pieceSquare]: { backgroundColor: 'rgba(255, 255, 0, 0.4)' },\n        ...(history.length && {\n            [sourceSquare]: {\n                backgroundColor: 'rgba(255, 255, 0, 0.4)'\n            }\n        }),\n        ...(history.length && {\n            [targetSquare]: {\n                backgroundColor: 'rgba(255, 255, 0, 0.4)'\n            }\n        })\n    };\n};","import React, { useEffect, useState } from 'react';\nimport { axiosAuthWrapper as axiosAW } from '../util/axiosAuthWrapper';\n\nimport Chessboard from 'chessboardjsx';\n//import WithMoveValidation from './WithMoveValidation'\nimport parseJwt from '../util/parseJwt';\nimport {TOKEN_KEY} from '../../storageKeys';\n\nimport ChessboardComp from './ChessboardComp';\n\n\nexport default function PlayGame({ socket, game_uuid, white, black }) {\n\n    const [chessboard, setChessboard] = useState();\n    const [move, setMove] = useState();\n    const [myTurn, setMyTurn] = useState();\n    const [gameState, setGameState] = useState();\n    const username = useState(parseJwt(localStorage.getItem(TOKEN_KEY)).username)[0];\n\n    var fenFunction = null;\n    function setFenFunction(callback) {\n        fenFunction = callback;\n    }\n\n    useEffect(() => {\n        let mounted = true;\n\n        axiosAW({\n            method: 'get',\n            url: '/game/info/state/' + game_uuid\n        })\n            .then((res) => {\n                if (!mounted) return;\n                setChessboard(res.data.chessboard)\n                setMyTurn(res.data.turn === username);\n            })\n            .catch(() => console.log('failed to fetch game state'));\n\n        return () => mounted = false;\n    }, [game_uuid, username]);\n\n\n    useEffect(() => {\n        let mounted = true;\n\n        socket.on(game_uuid, (data) => {\n            if (!mounted) return;\n            fenFunction(data.chessboard);\n            setChessboard(data.chessboard);\n            setMove(data.move);\n            setMyTurn(true);\n            if (data.check)\n                setGameState('Check');\n            if (data.checkmate)\n                setGameState('CheckMate');\n            if (data.draw)\n                setGameState('Draw');\n        })\n\n        return () => mounted = false;\n    }, [game_uuid, socket, fenFunction]);\n\n\n    function moveEvent(new_move,new_chessboard, isCheckmate, isCheck, isDraw) {\n\n        socket.emit('move', {\n            game_uuid: game_uuid,\n            whosend: username,\n            turn: username === white ? black : white,\n            chessboard: new_chessboard,\n            move: new_move,\n            check: isCheck,\n            checkmate: isCheckmate,\n            draw: isDraw\n        });\n      //  console.log(new_move);\n        console.log('check?'+ isCheck);\n        //setMove(new_move);\n        setChessboard(new_chessboard);\n        setMyTurn(false);\n    }\n\n    var color;\n    color= username === white ? 'white' : 'black';\n   // console.log('i am player color : ' + color);\n    /*\n    console.log('----------------------------------------------');\n    console.log('Is my turn : '+ myTurn);\n    console.log('chessboard value : ' + chessboard);\n    console.log('move value : ' ,  JSON.stringify(move));\n    console.log('----------------------------------------------');\n    */\n\n    return (\n        <div className=\"container\">\n            <div className=\"row justify-content-center\">\n                <ChessboardComp className=\"col\"\n                                socket={socket} \n                                game_uuid={game_uuid} \n                                moveEvent={moveEvent} \n                                myTurn={myTurn} \n                                white={white} \n                                black={black} \n                                move={move} \n                                chessboard={chessboard} \n                                color={color}\n                                setFenFunction={setFenFunction}\n                                setGameState={setGameState}\n                                >\n                    {({\n                          position,\n                          onDrop,\n                          allowDrag,\n                          onListen,\n                          onMouseOverSquare,\n                          onMouseOutSquare,\n                          squareStyles,\n                          dropSquareStyle,\n                          // onDragOverSquare,\n                          onSquareClick,\n                          onSquareRightClick\n                      }) => (\n                        <Chessboard\n                            id=\"humanVsHuman\"\n                            calcWidth={({ screenWidth }) => (screenWidth < 500 ? 350 : 480)}\n                            position={chessboard}\n                            onDrop={onDrop}\n                            orientation={username === white? 'white' : 'black'}\n                            onMouseOverSquare={onMouseOverSquare}\n                            onMouseOutSquare={onMouseOutSquare}\n                            boardStyle={{\n                                borderRadius: '5px',\n                                boxShadow: `0 5px 15px rgba(0, 0, 0, 0.5)`\n                            }}\n                            squareStyles={squareStyles}\n                            dropSquareStyle={dropSquareStyle}\n                            allowDrag={allowDrag}\n                            //onDragOverSquare={onDragOverSquare}\n                            onSquareClick={onSquareClick}\n                            onSquareRightClick={onSquareRightClick}\n                        />\n                    )}\n\n                </ChessboardComp>\n            </div>\n            {gameState && (\n                <div className=\"d-sm-flex justify-content-center m-5\">\n                    <h1 className=\"alert alert-primary\">{gameState}</h1>\n                </div>\n            ) }\n\n        </div>\n    );\n}","import React, { useEffect, useContext, useState } from 'react';\nimport { Redirect, Link, useParams } from 'react-router-dom';\n\nimport PlayGame from './PlayGame';\n\nimport { axiosAuthWrapper as axioAW } from '../util/axiosAuthWrapper';\nimport { AuthContext } from '../../App';\nimport { TOKEN_KEY } from '../../storageKeys';\n\nimport io from 'socket.io-client';\n\nexport default function GameRoom({ setRefresh }) {\n\n    const authContext = useContext(AuthContext);\n    const { game_uuid } = useParams();\n    const [forbidden, setForbidden ] = useState(false);\n    const [white, setWhite] = useState();\n    const [black, setBlack] = useState();\n    const socket = useState(io())[0];\n\n    // on dismount disconnect socket\n    useEffect(() => () => socket.disconnect(), [socket]);\n\n    // connect to the game channel\n    useEffect(() => {\n        socket.emit('joinGameRoom', {\n            game_uuid: game_uuid,\n            token: localStorage.getItem(TOKEN_KEY)\n        });\n    }, [game_uuid, socket]);\n\n    \n    // on mount check if this is my game\n    useEffect(() => {\n        let mounted = true;\n\n        axioAW({\n            method: 'get',\n            url: '/game/info/players/' + game_uuid\n        }, authContext)\n        .then((res) => {\n            if (!mounted) return;\n            setWhite(res.data.white);\n            setBlack(res.data.black);\n        })\n        .catch((err) => {\n            if (!mounted) return;\n            if(err.response !== undefined && err.response.status === 403)\n                setForbidden(true)\n        })\n\n        return () => mounted = false;\n    }, [authContext, game_uuid]);\n\n\n    return (\n        ( forbidden ? \n        <Redirect to=\"\"/> :\n        <div className=\"container\">\n            <div className=\"card mt-3\">\n                <div className=\"d-flex m-3 align-items-center\">\n                    <div className=\"container\">\n                        <h3 className=\"\">&#9812; <span className=\"badge badge-light\">{white}</span></h3>\n                        <h3 className=\"\">&#9818; <span className=\"badge badge-dark\">{black}</span></h3>\n                    </div>\n                    <Link className=\"ml-auto\" to=\"/\">\n                        <button className=\"btn btn-secondary btn-md\" onClick={() => setRefresh(true)}>\n                            Home\n                            <svg className=\"bi bi-house-fill\" width=\"1.5em\" height=\"1.5em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path fillRule=\"evenodd\" d=\"M8 3.293l6 6V13.5a1.5 1.5 0 01-1.5 1.5h-9A1.5 1.5 0 012 13.5V9.293l6-6zm5-.793V6l-2-2V2.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5z\" clipRule=\"evenodd\"/>\n                                <path fillRule=\"evenodd\" d=\"M7.293 1.5a1 1 0 011.414 0l6.647 6.646a.5.5 0 01-.708.708L8 2.207 1.354 8.854a.5.5 0 11-.708-.708L7.293 1.5z\" clipRule=\"evenodd\"/>\n                            </svg>\n                        </button>\n                    </Link>\n                </div>\n            </div>\n            <div className=\"mt-5 mb-5\">\n                <PlayGame socket={socket} game_uuid={game_uuid} white={white} black={black} />\n            </div>\n        </div>)\n    );\n}","import React, { useState } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport NavBar from './NavBar';\nimport GamesHandler from './home/GamesHandler';\nimport GameRoom from './play/GameRoom';\n\n\nexport default function Game() {\n    const [refresh, setRefresh] = useState(true);\n\n    return (\n        <div className=\"container\">\n            <Router>\n                <Switch>\n                    <Route path=\"/room/:game_uuid\">\n                        <NavBar refresh={refresh} setRefresh={setRefresh} />\n                        <GameRoom setRefresh={setRefresh} />\n                    </Route>\n                    <Route path=\"/\">\n                        <NavBar refresh={refresh} setRefresh={setRefresh} />\n                        <GamesHandler refresh={refresh} setRefresh={setRefresh} />\n                    </Route>\n                </Switch>\n            </Router>\n        </div>\n    );\n}","import React, { useState, createContext } from 'react';\n\nimport Login from './login/Login';\nimport Game from './game/Game';\n\nimport {TOKEN_KEY} from './storageKeys.js';\n\nexport const AuthContext = createContext();\n\nfunction App() {\n  const [auth, setAuth] = useState(localStorage.getItem(TOKEN_KEY) !== null);\n\n  return (\n    <AuthContext.Provider value={{auth : auth,  setAuth : setAuth}}>\n      { auth ? <Game /> : <Login /> }\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}